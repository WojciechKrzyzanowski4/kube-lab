fullnameOverride: kube-lab

api:
  name: "kube-lab"
  component: "api"
  replicas: 3
  image:
    repository: your-repository
    tag: ""
    pullPolicy: Always
  podAnnotations:
    example.com/release: "lab"
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 250m
      memory: 256Mi
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 0
  containerPort: 5000
  livenessProbe:
    httpGet:
      path: /livez
      port: 5000
    initialDelaySeconds: 20
    periodSeconds: 10
  readinessProbe:
    httpGet:
      path: /readyz
      port: 5000
    initialDelaySeconds: 5
    periodSeconds: 5
  nodeSelector:
    kubernetes.io/os: linux
  tolerations:
    - key: workload
      operator: Exists
      effect: NoSchedule
  affinity:
    podAntiAffinity:
      preferredDuringSchedulingIgnoredDuringExecution:
        - weight: 100
          podAffinityTerm:
            topologyKey: kubernetes.io/hostname
            labelSelector:
              matchExpressions:
                - key: app.kubernetes.io/name
                  operator: In
                  values:
                    - "kube-lab"
  service:
    name: "kube-lab"
    component: "api-svc"
    type: ClusterIP
    port: 80
    annotations:
      prometheus.io/scrape: "true"
      prometheus.io/port: "5000"
    labels: { }
  ingress:
    enabled: true
    name: "kube-lab"
    component: "api-ingress"
    className: "nginx"
    annotations: { }
    hosts:
      - kube-lab-api.127.0.0.1.nip.io
      - kube-lab.local
    path: /
    tls:
      - secretName: kube-lab-tls
        hosts:
          - kube-lab.local
  secret:
    name: api-secret
    API_KEY: "change-me"

config:
  name: "kube-lab"
  component: "config"
  APP_NAME: "FlaskLabApp"
  APP_ENV: lab
  APP_GREETING: "Welcome to the Lab"

autoscaling:
  enabled: true
  name: "kube-lab"
  component: "api-hpa"
  minReplicas: 2
  maxReplicas: 5
  targetCPUUtilizationPercentage: 60
  targetMemoryUtilizationPercentage: 80
